<div class="row">
  <div class="col-sm-12">
    <!-- <app-card [template]="subContent" cardTitle=""> -->

      <div style="padding: 30px;">
        <div  class="custom-card d-flex flex-column justify-content-between ">

            <div class="row">
              <button [disabled]="count == 0 || isCountStarted?true:false" (click)="Back()" style="margin-left: 5px;" nz-button
                nzType="default" nzShape="round"><i class="feather icon-chevron-left text-muted"></i>ወደ ኋላ</button>

              <button [disabled]="isCountStarted || !isPreviouslyStarted" (click)="Next()" style="margin-left: 5px;" nz-button
                nzType="default" nzShape="round"><i class="feather icon-chevron-right text-muted"></i>ቀጣይ</button>

              <button [disabled]="isCountStarted || !isPreviouslyStarted" (click)="open_Answer()"
                style="margin-left: 25px; border: 1px solid #05bf0d;" nz-button nzType="default" nzShape="round"><i
                  class="feather icon-check  text-success"></i> &nbsp; <span class="text-success">የጥያቄ መልስ</span></button>
                  <div style="margin-left: 5px;">
                    <button [disabled]="isCountStarted || !isPreviouslyStarted" data-toggle="modal" (click)="GoToWinners()" nzShape="round" nz-button nzType="default"><i class="feather icon-award"></i>&nbsp; ጠቅላላ ውጤት</button>
                  </div>
              </div>
            <div class="row mt-4">
            <div  class="d-flex flex-column" *ngFor="let item of questions; let i=index">
              <div class="d-flex flex-column" *ngIf="count == i">
              <div class="d-flex flex-column  question-container align-items-center mt-3" >
                <div class="row align-items-center question-title">
                  <span style="font-size:30px; color:#fff">ጥያቄ
                    {{i+1}}
                    {{checkQuestionStatus(item.qts.status,i)}}
                  </span>
                  <button style="margin-left: 10px;" *ngIf="!isCountStarted && item.qts.status != 1"
                    (click)="start(item.qts.time,item.qts.id)" nz-button nzType="default" nzShape="round"><i
                      class="feather icon-play text-muted"></i></button>
                  <span [@fade] *ngIf="timeEnds" style="margin-left: 10px; background: #e7cdb98c; padding: 5px; border-radius: 15px;">
                    <span style="font-size: 26px; color: red; " *ngIf="timeEnds">{{timeEnds}}</span>
                  </span>
                  <div style="margin-left: 10px; background: #e7cdb98c; padding: 5px; border-radius: 15px;"
                    *ngIf="!timeEnds && isTimerRunning ==0 && item.qts.status == 1 && !isCountStarted">
                    <span style="font-size: 26px; color: red;">ይህ ጥያቄ ተጠይቋል</span>
                  </div>
                </div>
                <div class="question-txt">
                  <span style="font-weight: 700; font-size: 18px; margin-left: 10px;">{{item.qts.question_label}}</span>

                </div>
              </div>

                <nz-progress
              *ngIf="seconds > 0"
                [nzPercent]="percent"
                [nzFormat]="formatTime" nzSize="large" [nzShowInfo]="false"></nz-progress>

              <div  class="d-flex flex-column choise-txt">
                <span style="font-weight: 500; border-top: 2px solid #14213d;  padding: 10px;" *ngFor="let it of item.cho;  let j=index">
                  <span style="font-size: 17px; margin-left: 20px;"> {{it.alphabet}}. {{it.choice_label}}</span> </span>
              </div>
            </div>

            </div>
            <div *ngIf="competitors.length > 0" class="timeline-container shadow-sm">
              <div class="d-flex flex-column ">

                <div class="row">
                  <div class="row">
                    <div class="circle shadow-sm">
                      <i style=" color: green; font-size: 20px;" class="feather icon-user-check icon-timeline "></i>
                    </div>
                    <div style="margin-left: 5px; color: #fff;" class="d-flex flex-column">
                      <span style="font-size: 20px;"
                        *ngIf="correctAnswers.length">{{correctAnswers.length}}/{{competitors.length}}</span>
                      <span style="font-size: 20px;" *ngIf="!correctAnswers.length">0/{{competitors.length}}</span>
                      <span>በትክክል መልሰዋል </span>
                    </div>

                  </div>
                  <div style="margin-left: 20px; color: #fff;" class="row">
                    <div  class="circle shadow-sm">
                      <i style="color: red; font-size: 20px;" class="feather icon-user-x icon-timeline "></i>
                    </div>
                    <div style="margin-left: 5px;" class="d-flex flex-column">
                      <span style="font-size: 20px;"
                        *ngIf="IncorrectAnswers.length">{{IncorrectAnswers.length}}/{{competitors.length}}</span>
                      <span style="font-size: 20px;" *ngIf="!IncorrectAnswers.length">0/{{competitors.length}}</span>
                      <span>በትክክል አልመለሱም</span>
                    </div>

                  </div>


                </div>


                <div class="timeline">
                  <nz-timeline nzMode="custom">
                    <nz-timeline-item *ngFor="let competitor of competitors" nzPosition="right" [ngStyle]="{'background-color':'green'}"
                      [nzColor]="competitor.answer?'green':'red'" [nzDot]="soccerTemplate">
                      <div class="row" style="margin-left: 10px">
                        <!-- <nz-avatar nzIcon="user" nzSrc="../../../../assets/images/user.png"></nz-avatar> -->

                        <div class="d-flex flex-column text-white">
                          <span style="font-size: 18px; font-weight: 700;">{{competitor.phone}}</span>
                          <span *ngIf="competitor.answer">በትክክል መልሰዋል</span>
                          <span *ngIf="!competitor.answer">በትክክል አልመለሱም</span>
                        </div>
                      </div>
                      <ng-template #soccerTemplate>
                        <div >
                          <i *ngIf="competitor.answer" style="font-size: 25px;" class="feather icon-user-check"></i>
                          <i *ngIf="!competitor.answer" style="font-size: 25px;" class="feather icon-user-x"></i>

                        </div>
                      </ng-template>
                    </nz-timeline-item>

                  </nz-timeline>
                </div>
              </div>





            </div>

          </div>



        </div>





      </div>

      <ng-template #subContent>
        <div class="row ">
          <div class="row align-items-center">
            <img width="80" height="80" class="rounded-circle shadow-sm" src="../../../../assets/images/qu.jpg" />
            <div style="margin-left: 10px;" class="d-flex flex-column">
              <span *ngIf="active?.season && active?.episode">{{active?.season}}/{{active?.episode}}</span>
              <span style="font-size: 30px;">የሳምንቱ ጥያቄዎች</span>

            </div>

          </div>

        </div>
      </ng-template>
    <!-- </app-card> -->
  </div>
</div>



<nz-drawer [nzVisible]="visible" [nzPlacement]="placement" [nzMaskClosable]="false" [nzOffsetY]="110" [nzHeight]="500"
  [nzClosable]="isTimerRunning == 2" [nzVisible]="visible" [nzPlacement]="placement" [nzTitle]="" (nzOnClose)="close()">

  <div class="d-flex flex-row">
    <div class="d-flex flex-column p-4 ml-4 align-items-center">
      <span *ngIf="timeEnds" style="font-size: 30px;
          color: #d11f1f;
      ">{{timeEnds}}</span>
      <div
        [ngClass]="minutes == 0 && seconds > 10 || minutes > 0?'d-flex flex-column mt-3 countdown-container':'d-flex flex-column mt-3 countdown-warning-container'">

        <div
          [ngClass]="minutes == 0 && seconds > 10 || minutes > 0?'d-flex flex-row mt-3 countdown-timer':'d-flex flex-row mt-3 countdown-timer-warning'">
          <span
            [ngClass]="minutes == 0 && seconds > 10 ||  minutes > 0?'shadow-sm minutes':'shadow-sm minutes-warning'"><span
              *ngIf="minutes < 10">0</span>{{minutes}}</span>
          <span [ngClass]="minutes == 0 && seconds > 10 || minutes > 0? 'ml-2 tracker':'ml-2 tracker-warning' ">:</span>
          <span
            [ngClass]="minutes == 0 && seconds > 10 || minutes > 0?'ml-2 shadow-sm seconds':'ml-2 shadow-sm seconds-warning'"><span
              *ngIf="seconds < 10">0</span>{{seconds}}</span>
        </div>
      </div>
    </div>
    <nz-skeleton style="margin-left: 250px;" *ngIf="!competitors.length" [nzActive]="true"></nz-skeleton>
    <div *ngIf="competitors.length" style="margin-left: 250px;" class="d-flex flex-column">

      <div class="row">
        <div class="row">
          <div style="width: 50px; height: 50px;" class="rounded-circle shadow-sm align-content-center p-2">
            <i style="font-size: 30px; color: green;" class="feather icon-user-check"></i>
          </div>
          <div style="margin-left: 5px;" class="d-flex flex-column">
            <span style="font-size: 20px;"
              *ngIf="correctAnswers.length">{{correctAnswers.length}}/{{competitors.length}}</span>
            <span style="font-size: 20px;" *ngIf="!correctAnswers.length">0/{{competitors.length}}</span>
            <span>በትክክል መልሰዋል </span>
          </div>

        </div>
        <div style="margin-left: 20px;" class="row">
          <div style="width: 50px; height: 50px;" class="rounded-circle shadow-sm align-content-center p-2">
            <i style="font-size: 30px; color: red;" class="feather icon-user-x"></i>
          </div>
          <div style="margin-left: 5px;" class="d-flex flex-column">
            <span style="font-size: 20px;"
              *ngIf="IncorrectAnswers.length">{{IncorrectAnswers.length}}/{{competitors.length}}</span>
            <span style="font-size: 20px;" *ngIf="!IncorrectAnswers.length">0/{{competitors.length}}</span>
            <span>በትክክል አልመለሱም</span>
          </div>

        </div>


      </div>


      <div #myDiv class="timeline">
        <nz-timeline nzMode="custom">
          <nz-timeline-item *ngFor="let competitor of competitors" nzPosition="right"
            [nzColor]="competitor.answer?'green':'red'" [nzDot]="soccerTemplate">
            <div class="row" style="margin-left: 5px">
              <!-- <nz-avatar nzIcon="user" nzSrc="../../../../assets/images/user.png"></nz-avatar> -->

              <div class="d-flex flex-column">
                <span>{{competitor.phone}}</span>
                <span>መልስ፡ {{competitor.msg}}</span>
              </div>
            </div>
            <ng-template #soccerTemplate>
              <i *ngIf="competitor.answer" style="font-size: 20px;" class="feather icon-user-check"></i>
              <i *ngIf="!competitor.answer" style="font-size: 20px;" class="feather icon-user-x"></i>
            </ng-template>
          </nz-timeline-item>

        </nz-timeline>
      </div>
    </div>
  </div>


</nz-drawer>

<nz-drawer [nzVisible]="visible_answer" [nzPlacement]="placement"  [nzMaskClosable]="false" [nzOffsetY]="110"
  [nzHeight]="500" [nzClosable]="true" [nzVisible]="visible_answer" [nzPlacement]="placement" [nzTitle]=""
  (nzOnClose)="close_Answer()">
  <div class="d-flex flex-column align-items-center text-white" *ngFor="let item of questions; let i=index">
    <div [@slide] class="d-flex flex-column align-items-center" *ngIf="count == i">
      <div class="d-flex flex-column align-items-center question-title">
        <span style="font-size:30px"> መልስ

        </span>
        <span style="font-weight: 700; font-size: 17px;">{{item.qts.question_label}}</span>

      </div>
      <div>

        <div style="border: 1px solid #14213d;" class="d-flex flex-column choise-txt text-dark">
          <span style=" margin-left: 10px; padding: 5px; font-weight: 500; font-size: 18px;" *ngFor="let it of item.cho;  let j=index">
            <span *ngIf="it.isAnswer == 1"> {{it.alphabet}}. {{it.choice_label}}</span> </span>
        </div>
      </div>
    </div>


  </div>


</nz-drawer>
